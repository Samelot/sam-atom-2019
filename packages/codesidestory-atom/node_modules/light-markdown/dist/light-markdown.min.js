/*! light-markdown 10-01-2016 */

(function(){"use strict";function a(a){return a&&(a=a.replace(/>/g,"&gt;"),a=a.replace(/</g,"&lt;")),a}function b(a){var b=a.map(function(a){return 1===a.token.length?a.token:""}).join(),c=new RegExp("[^"+b+"]"),d=/(^|\n)&gt;&gt;&gt;([\s\S]*$)/,e=/(^|\n)&gt;(([^\n]*)(\n&gt;[^\n]*)*)/g,f=/\r?\n\r?\n\r?/g,g=/\r?\n\r?/g,h=/(^|\s)((?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[\/?#]\S*)?)/gi;return{nonTokensChars:c,multilineQuote:d,singleLineQuote:e,blockquoteTags:/<\/?blockquote>/gi,doubleLineBreak:f,singleLineBreak:g,url:h}}function c(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function d(){var a=[{name:"pre",token:"```",elementName:"pre",multiline:!0,plainContent:!0},{name:"code",token:"`",elementName:"code",ignoreAfter:!0,plainContent:!0},{name:"bold",token:"*",elementName:"b",requireNonTokens:!0,spaceWrapIgnored:!0},{name:"italics",token:"_",elementName:"i",requireNonTokens:!0},{name:"strikethrough",token:"~",elementName:"s",requireNonTokens:!0,spaceWrapIgnored:!0}];return a.forEach(function(a){if(!a.regex){var b='(^|[\\s\\?\\.,\\-!\\^;:{(\\[%$#+="])',d=a.multiline?"([\\s\\S]*?)?":"(.*?\\S *)?",e=a.ignoreAfter?"":"(?=$|\\s|[\\?\\.,'\\-!\\^;:})\\]%$~{\\[<#+=\"])",f=c(a.token),g=b+f+d+f+e;a.regex=new RegExp(g,"g")}}),a}var e={},f=d(),g=b(f),h="₪₪PLaiN₪₪",i={},j={slack:{bold:!0,italics:!0,strikethrough:!0,pre:!0,code:!0,longQuote:!0,quote:!0,autoLink:!0,paragraph:!0,lineBreaks:!0},skype:{bold:!0,italics:!0,strikethrough:!0,pre:!1,code:!1,longQuote:!1,quote:!1,autoLink:!0,paragraph:!1,lineBreaks:!0}};e.setOption=function(a,b){return i[a]=!!b,this},e.getOption=function(a){return i[a]},e.setFlavor=function(a){var b=j[a];if(b)for(var c in b)b.hasOwnProperty(c)&&(i[c]=b[c]);return this},e.toHtml=function(b){b=a(b);var c=[];if(f.forEach(function(a){i[a.name]&&(b=b.replace(a.regex,function(b,d,e){if(!e||a.requireNonTokens&&!g.nonTokensChars.test(e)||1===a.token.length&&(e[0]===a.token||e.slice(-1)===a.token)||a.spaceWrapIgnored&&" "===e[0]&&" "===e.slice(-1))return b;if("function"==typeof a.processContent&&(e=a.processContent(e)),a.plainContent){var f=c.push(e)-1;e=h+f}return d+"<"+a.elementName+">"+e+"</"+a.elementName+">"}))}),i.longQuote&&(b=b.replace(g.multilineQuote,function(a,b,c){return"&gt;&gt;&gt;"===a?a:(c=c.replace(/^([\s]*)(&gt;)*/,function(a,b,c){return c?a:""}),"<blockquote>"+c+"</blockquote>")})),i.quote&&(b=b.replace(g.singleLineQuote,function(a,b,c){return"&gt;"===a?a:(c=c.replace(/\n&gt;/g,"\n"),"<blockquote>"+c+"</blockquote>")})),i.autoLink&&(b=b.replace(g.url,function(a,b,c){return b+'<a href="'+c+'" target="_blank">'+c+"</a>"})),i.paragraph){for(var d,e=[];d=g.doubleLineBreak.exec(b);)e.push({start:d.index,length:d[0].length});for(;d=g.blockquoteTags.exec(b);)e.push({start:d.index,length:d[0].length,suffix:d[0]});e.push({start:b.length,length:0}),e.sort(function(a,b){return a.start-b.start});var j="",k=0;e.forEach(function(a){var c="",d=b.substring(k,a.start);d&&(c="<p>"+d+"</p>"),a.suffix&&(c+=a.suffix),j+=c,k=a.start+a.length}),b=j}return i.lineBreaks&&(b=b.replace(g.singleLineBreak,"<br/>")),c.forEach(function(a,c){b=b.replace(h+c,a)}),b},e.setFlavor("slack");var k=this;"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):k.lightMarkdown=e}).call(this);
//# sourceMappingURL=light-markdown.min.js.map
